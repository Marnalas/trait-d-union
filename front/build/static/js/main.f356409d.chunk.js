(this["webpackJsonptraitdunion-pmsmp-front"]=this["webpackJsonptraitdunion-pmsmp-front"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"domain":"traitdunion.eu.auth0.com","clientId":"6FSemac44n6J9AbNYt6XPJAUynN3IIrK"}')},39:function(e,t,a){e.exports=a(71)},44:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(13),o=a.n(c),l=(a(44),a(8)),i=function(){return n.a.createElement("header",{className:"header-2"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"header-top"},n.a.createElement("div",{className:"logo-area"},n.a.createElement("a",{href:"index.html"},n.a.createElement("img",{src:"/logo.png",alt:"logo r\xe9gion grand est "}))),n.a.createElement("div",{className:"header-top-toggler"},n.a.createElement("div",{className:"header-top-toggler-button"})),n.a.createElement("div",{className:"top-nav",style:{display:"flex"}},n.a.createElement(l.b,{to:"/poster-offre"},n.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg"},n.a.createElement("i",{className:"fas fa-plus"})," Poster une offre d'immersion"))))))))},s=a(7),u=a(1),m=a.n(u),d=a(2),p=a(3),f=a(11),b=a(29),v=a.n(b),h=function(){return window.history.replaceState({},document.title,window.location.pathname)},E=n.a.createContext(),g=function(){return Object(r.useContext)(E)},N=function(){var e=g(),t=e.loading,a=e.user;return t||!a?n.a.createElement("div",null,"Loading..."):n.a.createElement(r.Fragment,null,n.a.createElement("img",{src:a.picture,alt:"Profile"}),n.a.createElement("h2",null,a.name),n.a.createElement("p",null,a.email),n.a.createElement("code",null,JSON.stringify(a,null,2)))},w=function(e){var t=e.component,a=e.path,c=Object(f.a)(e,["component","path"]),o=g(),l=o.loading,i=o.isAuthenticated,u=o.loginWithRedirect;Object(r.useEffect)((function(){l||i||function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({appState:{targetUrl:a}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,i,u,a]);return n.a.createElement(s.a,Object.assign({path:a,render:function(e){return!0===i?n.a.createElement(t,e):null}},c))},x=a(30),O=a(31),j=a(37),y=a(32),k=a(38),S=function(e){function t(){return Object(x.a)(this,t),Object(j.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"alice-bg padding-top-70 padding-bottom-70"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"breadcrumb-area"},n.a.createElement("h1",null,this.props.title),n.a.createElement("nav",{"aria-label":"breadcrumb"},n.a.createElement("ol",{className:"breadcrumb"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(l.b,{to:"/"},"Accueil")),n.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},this.props.pageDescription))))))))}}]),t}(n.a.Component),P=a(36),C=a(33),q=a.n(C),R=a(34),T=a.n(R),W=a(35),I=a.n(W)()(T.a),U=function(){var e=Object(P.a)(),t=e.register,a=e.handleSubmit,r=e.errors,c=e.reset,o=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.a.post("/api/v1/offres",t);case 3:return e.next=5,I.fire({icon:"success",title:"F\xe9licitations ! Votre offre a bien \xe9t\xe9 cr\xe9\xe9e et va \xeatre diffus\xe9e largement !",confirmButtonText:"Poster une nouvelle offre"});case 5:c(),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,I.fire({icon:"error",title:"Oh non ! Une erreur s'est produite. Merci de r\xe9essayer ult\xe9rieurement.",confirmButtonText:"OK",footer:'<a href="mailto:contact@traitdunion.beta.gouv.fr">Nous contacter</a>'});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return console.log(r),n.a.createElement(n.a.Fragment,null,n.a.createElement(S,{title:"Poster une offre",pageDescription:"Poster une offre d'immersion (PMSMP)"}),n.a.createElement("div",{className:"alice-bg section-padding-bottom"},n.a.createElement("div",{className:"container no-gliters"},n.a.createElement("div",{className:"row no-gliters"},n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"dashboard-container"},n.a.createElement("div",{className:"dashboard-content-wrapper"},n.a.createElement("form",{onSubmit:a(o),className:"dashboard-form job-post-form"},n.a.createElement("div",{className:"dashboard-section basic-info-input"},n.a.createElement("h4",null,"Faire d\xe9couvrir un m\xe9tier gr\xe2ce \xe0 une offre d'immersion (PMSMP)"),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-md-3 col-form-label"},"Quel m\xe9tier souhaitez-vous faire d\xe9couvrir ?"),n.a.createElement("div",{className:"col-md-9"},n.a.createElement("input",{autoFocus:!0,type:"text",name:"jobTitle",className:"form-control",placeholder:"Intitul\xe9 du m\xe9tier que vous souhaitez faire d\xe9couvrir",required:"required",ref:t({required:"Ce champ est obligatoire"})}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-md-3 col-form-label"},"O\xf9 se trouve l'immersion ?"),n.a.createElement("div",{className:"col-md-9"},n.a.createElement("input",{type:"text",name:"address",className:"form-control",placeholder:"Lieu de l'immersion (Code Postal a minima)",required:"required",ref:t({required:!0})}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-md-3 col-form-label"},"\xc0 quelle adresse email pouvons-nous vous joindre ?"),n.a.createElement("div",{className:"col-md-9"},n.a.createElement("input",{type:"text",className:"form-control",name:"email",placeholder:"Votre adresse email",required:"required",ref:t({required:!0,pattern:/^\S+@\S+$/i})})))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-md-3 col-form-label"}),n.a.createElement("div",{className:"col-md-9"},n.a.createElement("button",{className:"button",type:"submit"},"Poster votre offre")))))))))))};var A=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(l.a,null,n.a.createElement("header",null,n.a.createElement(i,null)),n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",exact:!0}),n.a.createElement(s.a,{path:"/poster-offre",exact:!0},n.a.createElement(U,null)),n.a.createElement(w,{path:"/profile",component:N}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(16);o.a.render(n.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?h:a,o=Object(f.a)(e,["children","onRedirectCallback"]),l=Object(r.useState)(),i=Object(p.a)(l,2),s=i[0],u=i[1],b=Object(r.useState)(),g=Object(p.a)(b,2),N=g[0],w=g[1],x=Object(r.useState)(),O=Object(p.a)(x,2),j=O[0],y=O[1],k=Object(r.useState)(!0),S=Object(p.a)(k,2),P=S[0],C=S[1],q=Object(r.useState)(!1),R=Object(p.a)(q,2),T=R[0],W=R[1];Object(r.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,r,n,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(o);case 2:if(t=e.sent,y(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,r=a.appState,c(r);case 10:return e.next=12,t.isAuthenticated();case 12:if(n=e.sent,u(n),!n){e.next=19;break}return e.next=17,t.getUser();case 17:l=e.sent,w(l);case 19:C(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},W(!0),e.prev=2,e.next=5,j.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,W(!1),e.finish(10);case 13:return e.next=15,j.getUser();case 15:a=e.sent,w(a),u(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,j.handleRedirectCallback();case 3:return e.next=5,j.getUser();case 5:t=e.sent,C(!1),u(!0),w(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(E.Provider,{value:{isAuthenticated:s,user:N,loading:P,popupOpen:T,loginWithPopup:I,handleRedirectCallback:U,getIdTokenClaims:function(){return j.getIdTokenClaims.apply(j,arguments)},loginWithRedirect:function(){return j.loginWithRedirect.apply(j,arguments)},getTokenSilently:function(){return j.getTokenSilently.apply(j,arguments)},getTokenWithPopup:function(){return j.getTokenWithPopup.apply(j,arguments)},logout:function(){return j.logout.apply(j,arguments)}}},t)}),{domain:F.domain,client_id:F.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)}},n.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.f356409d.chunk.js.map